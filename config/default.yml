# Tablecop Default Configuration
#
# Table-like, condensed Ruby formatting.
# These defaults prioritize vertical alignment and single-line expressions
# where they improve readability.
#
# CAUTION: Some alignment cops have known bugs with autocorrect.
# See docs/known-issues.md for details.

# =============================================================================
# Tablecop Custom Cops
# =============================================================================

Tablecop/AlignAssignments:
  Description: "Align consecutive assignments on the = operator."
  Enabled: true
  VersionAdded: "0.1.0"

Tablecop/AlignMethods:
  Description: "Align contiguous single-line method definitions."
  Enabled: true
  VersionAdded: "0.1.0"

Tablecop/CondenseWhen:
  Description: "Condense multi-line `when` clauses to single lines when possible."
  Enabled: true
  VersionAdded: "0.1.0"

Tablecop/SafeEndlessMethod:
  Description: "Convert multi-line methods to single-line, avoiding RuboCop bugs."
  Enabled: true
  VersionAdded: "0.1.0"

# =============================================================================
# Disabled Cops (conflict with Tablecop alignment)
# =============================================================================

# DISABLED: Conflicts with Tablecop/AlignAssignments.
# SpaceAroundOperators enforces exactly one space, which undoes alignment padding.
Layout/SpaceAroundOperators:
  Enabled: false

# DISABLED: Conflicts with Tablecop/SafeEndlessMethod.
# These cops try to reformat blocks/methods that SafeEndlessMethod creates,
# causing infinite autocorrect loops.
Style/SingleLineDoEndBlock:
  Enabled: false

Style/SingleLineMethods:
  Enabled: false

# =============================================================================
# Disabled Cops (replaced by Tablecop equivalents)
# =============================================================================

# DISABLED: Style/EndlessMethod has critical autocorrect bugs:
# - Destroys heredoc content entirely
# - Breaks rescue clauses (orphans them outside the class)
# - Fails in module_eval contexts (Toys, DSLs)
# - Fails with modifier-if calling dynamic methods
# See docs/known-issues.md for details.
# Use Tablecop/SafeEndlessMethod instead.
Style/EndlessMethod:
  Enabled: false

# Related to EndlessMethod - can cause issues in the same contexts
Style/AmbiguousEndlessMethodDefinition:
  Enabled: false

# =============================================================================
# Layout - Alignment
# =============================================================================

# Require spaces inside hash braces: { foo: 1 }
Layout/SpaceInsideHashLiteralBraces:
  EnforcedStyle: space

# Allow extra spacing for alignment
# NOTE: ForceEqualSignAlignment has a bug with compound operators (||=, &&=)
# that can create syntax errors. Use with caution.
Layout/ExtraSpacing:
  AllowForAlignment: true
  AllowBeforeTrailingComments: true
  ForceEqualSignAlignment: false  # Disabled due to ||= bug

# Table-style hash alignment
# NOTE: Can cause infinite loops when combined with other alignment cops.
# If you experience hangs, try switching to 'key' style.
Layout/HashAlignment:
  EnforcedHashRocketStyle: table
  EnforcedColonStyle: table
  EnforcedLastArgumentHashStyle: always_inspect

# Consistent indentation (not aligned to brackets/parens)
Layout/FirstArrayElementIndentation:
  EnforcedStyle: consistent

Layout/FirstArgumentIndentation:
  EnforcedStyle: consistent
